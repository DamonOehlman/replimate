<!DOCTYPE html> <html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">      <title>Replimate</title>   <style>     body {       font-size: 16px;       line-height: 24px;       background: #fff url("bg.png");       color: #252519;       font-family: "Palatino Linotype", "Book Antiqua", Palatino, FreeSerif, serif;       padding: 0 0 50px 50px;     }     div.container {       width: 720px;       margin: 50px 0 50px 50px;     }     p {       width: 550px;     }       #documentation p {         margin-bottom: 4px;       }     a, a:visited {       padding: 0 2px;       text-decoration: none;       background: #dbe6f3;       color: #3f6fa5;     }     a:active, a:hover {       color: #dbe6f3;       background: #3f6fa5;     }     h1, h2, h3, h4, h5, h6 {       margin-top: 40px;       width: 550px;       line-height: 1.25em;     }     b.header {       font-size: 18px;     }     span.alias {       font-size: 14px;       font-style: italic;       margin-left: 20px;     }     table, tr, td {       margin: 0; padding: 0;     }       td {         padding: 2px 12px 2px 0;       }     ul {       list-style-type: circle;       padding: 0 0 0 20px;     }       li {         width: 500px;         margin-bottom: 10px;       }     code, pre, tt {       font-family: Monaco, Consolas, "Lucida Console", monospace;       font-size: 12px;       line-height: 18px;       color: #555529;     }       pre {         font-size: 12px;         padding: 2px 0 2px 12px;         border-left: 6px solid #aaaa99;         margin: 0px 0 30px;       }   </style> </head> <body>   <h1>Replimate</h1>        <em>CouchDB Replication Helpers for the _replicator db</em>         <h1>Replimate</h1>

<p>Replimate provides some helpers for working with the CouchDB 1.1 (and above) <code>_replicator</code> database.  Using the <code>_replicator</code> database provides some benefits over the traditional replication methods including replication persistence across CouchDB server restarts.</p>

<h2>Example Usage</h2>

<p>Working with replimate is designed to be really easy, so let's have a look.</p>

<h3>Getting the Current _replicator DB docs</h3>

<pre>
replimate('http://replimate.iriscouch.com/', function(err, docs) {
    console.log(docs);
});
</pre>

<h3>Creating a New Replication Job</h3>

<p>Creating a new replcication job is pretty easy also:</p>

<pre>
var opts = {
    action: 'replicate',
    source: 'http://sidelab.iriscouch.com/seattle_neighbourhood',
    target: 'seattle_neighbourhood'
};

replimate('http://admin:notaparty@replimate.iriscouch.com/', opts, function(err, monitor) {
    monitor.on('completed', function() {
        console.log('finished');
    });
});
</pre>

<p>You will note here, however, that we need to supply admin credentials to create a new replication job as the seattle_neighbourhood db will be need to be created on the replimate.iriscouch.com server.</p>

<h3>Removing Completed Jobs</h3>

<p>One thing that is interesting about the <code>_replicator</code> database is that it does start to fill up with replication jobs that have been completed in the past.  In an effort to help keep my replicator database instances clear, the <a href="https://github.com/DamonOehlman/replimate/blob/master/lib/actions/clear-completed.js">clear-completed</a> was created.</p>

<p>Like creating new replication jobs, a user with admin privileges is required:</p>

<pre>
replimate('http://admin:notaparty@replimate.iriscouch.com/', { action: 'clear-completed' }, function(err) {
    if (! err) {
        console.log('_replicator database now a little cleaner...');
    }
    else {
        console.log(err);
    }
});
</pre> </body> </html>